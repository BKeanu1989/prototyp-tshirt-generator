<html>
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> 
<body>
<div class="container">
	<form class="" action="/" method="post">
    Add Product:
    <img src="http://placehold.it/200x200&text=tshirt-basic" alt="" class="add_tshirt-basic" data-quality="Basic" data-type="T-Shirt">
    <img src="http://placehold.it/200x200&text=tshirt-premium" alt="" class="add_tshirt-premium" data-quality="Premium" data-type="T-Shirt">
	</form>
</div>	

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
$(document).ready(function() {
	function displayProductForm() {

		// fetch prices for types & quality
		var tshirtBasicPrice = 14.00;
		var tshirtPremiumPrice = 16.00;

		var type = $(this).attr('data-type');
		var quality = $(this).attr('data-quality');

		var price;

		var price = handlePrice(type, quality);

		var wrapperBeginning = "<div class='wrapper'><span class='close_me' onclick='removeProductForm(event)'>close</span>";
		var chosenType = "<div class='form-group'><label for='type'>Ausgewählte Produktart:</label><input class='form-control' type='text' value="+type+" disabled></div>";
		var chosenQuality = "<div class='form-group'><label for='type'>Ausgewählte Qualität:</label><input class='form-control' type='text' value="+quality+" disabled></div>";

		var motivInput = "<div class='form-group'><label for='motiv'>Motiv:</label><input class='form-control' type='text' name='motiv' id='motiv' placeholder='test.tiff'></div>";
		var priceInput = "<div class='form-group'><label for='price'>Price €:</label><input class='form-control' type='number' name='price' id='price' min='14.00' value='"+price+"'></div>";
		var colorText = "<span style='font-size: 16px; display: block;'>Farben</span>";
		var colorCheckboxButtonsWhite = "<div class='checkbox'><label><input type='checkbox' value='weiss'>Weiß</label></div>";
		var colorCheckboxButtonsBlack = "<div class='checkbox'><label><input type='checkbox' value='schwarz'>Schwarz</label></div>";
		var colorCheckboxButtonsGrey = "<div class='checkbox'><label><input type='checkbox' value='grau'>Grau</label></div>";
		var submitShowVariationFields = "<a class='btn btn-primary show_variations' href='#' role='button'>Zeige Varianten</a>'";
		var wrapperEnd = "</div>";
		var appendInputs = wrapperBeginning + chosenType + chosenQuality + motivInput + priceInput + colorCheckboxButtonsWhite + colorCheckboxButtonsBlack + colorCheckboxButtonsGrey + submitShowVariationFields + wrapperEnd;

		$(appendInputs).appendTo('form');

	}

	function handlePrice(type, quality) {
		switch(true) {
			case (type === 'T-Shirt') && (quality === 'Basic'):
			price = "14.00"
			break;
			case (type === 'T-Shirt') && (quality === 'Premium'):
			price = "17.00"
		}
		return price;
	}

var checkedColors = $('input[type="checkbox"]:checked');


	$('img').click(displayProductForm);

	// TODO debug closing function ... only works if injected into console ... maybe because its created after dom rendering
	// $('span').click(function() {
	// 	console.log("close me was clicked");
	// 	$(this).parent().detach();
	// });
});
	// if image (product is clicked) get quality & type
	// append fields with _motiv, _price - input type number min: mindestpreis, prepopulate _sizing_guide_img, input type radio - what colors
	// click button for creation of variations with given values/colors
	// display respective images
		// attribute_pa_farbe: weiss, schwarz, grau
		// attribute_pa_groesse: s, m, l, xl, xxl
		// prepopulate attribute_pa fields & _price (with product price), _sku,  			 		

	function removeProductForm(e) {
		var target = e.target;
		var parent = target.parentElement;
		parent.remove();
	}

</script>



</body>
</html>